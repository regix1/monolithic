services:
  monolithic:
    # For local builds, use:
    # build:
    #   context: .
    # image: lancache-monolithic:latest

    # For pre-built image:
    image: ghcr.io/regix1/monolithic:latest
    env_file:
      - .env
    restart: unless-stopped
    network_mode: host
    volumes:
      - ./data/cache:/data/cache
      - ./data/logs:/data/logs
      - ./data/ssl:/data/ssl
    environment:
      - PUID=${PUID:-1000}
      - PGID=${PGID:-1000}
      - CACHE_DISK_SIZE=${CACHE_DISK_SIZE:-1000g}
      - CACHE_INDEX_SIZE=${CACHE_INDEX_SIZE:-500m}
      - CACHE_MAX_AGE=${CACHE_MAX_AGE:-3560d}
      - UPSTREAM_DNS=${UPSTREAM_DNS:-8.8.8.8 8.8.4.4}
      # Set to true to enable HTTPS caching via SSL bump
      # Requires installing CA certificate on client machines
      - ENABLE_SSL_BUMP=${ENABLE_SSL_BUMP:-false}
