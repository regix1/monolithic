  # Enable HTTP/1.1 and clear Connection header to allow keepalive with upstream servers
  # This improves download speeds by allowing upstream servers to keep connections open
  #
  # Basic keepalive (always enabled):
  #   These settings prevent nginx from sending "Connection: close" to upstreams.
  #
  # Full keepalive pooling (ENABLE_UPSTREAM_KEEPALIVE=true):
  #   When enabled, nginx uses upstream blocks with connection pools.
  #   The proxy_pass directive uses $upstream_name which maps to the generated
  #   upstream blocks. Unmapped domains fall back to $host behavior.
  #   DNS is refreshed periodically via UPSTREAM_REFRESH_INTERVAL (default: 1h).
  #
  # See: https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive
  proxy_http_version 1.1;
  proxy_set_header Connection "";
  proxy_socket_keepalive on;
