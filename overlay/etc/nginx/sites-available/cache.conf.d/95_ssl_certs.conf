    # Serve SSL certificates for easy download
    # Only active when ENABLE_SSL_BUMP=true and certs exist
    location /lancache-certs/ {
        alias /data/ssl/;
        autoindex on;

        # Set correct MIME types for certificate downloads
        types {
            application/x-pem-file pem;
            application/x-x509-ca-cert der crt;
            application/pkix-crl crl;
        }

        # Force download instead of display
        add_header Content-Disposition 'attachment';
    }

    # Serve CRL at a well-known path for certificate revocation checking
    # Windows will fetch this URL from the CRL Distribution Point in certificates
    location /crl/lancache-ca.crl {
        alias /data/ssl/lancache-ca.crl;
        default_type application/pkix-crl;
    }

    # Simple landing page for certificate info
    location = /lancache-certs {
        default_type text/html;
        return 200 '<!DOCTYPE html>
<html>
<head><title>LanCache SSL Certificates</title></head>
<body style="font-family: sans-serif; max-width: 800px; margin: 50px auto; padding: 20px;">
<h1>LanCache SSL Bump Certificates</h1>
<p>To enable HTTPS caching, install the CA certificate on your gaming PC:</p>
<h2>Downloads</h2>
<ul>
<li><a href="/lancache-certs/lancache-ca.der">lancache-ca.der</a> - Windows (recommended)</li>
<li><a href="/lancache-certs/lancache-ca.pem">lancache-ca.pem</a> - Linux/macOS</li>
</ul>
<h2>Windows Installation</h2>
<ol>
<li>Download <strong>lancache-ca.der</strong></li>
<li>Double-click the downloaded file</li>
<li>Click "Install Certificate"</li>
<li>Select "Local Machine" → Next</li>
<li>Select "Place all certificates in the following store"</li>
<li>Click Browse → Select "Trusted Root Certification Authorities"</li>
<li>Click Next → Finish</li>
</ol>
<h2>Linux Installation</h2>
<pre>
curl -o lancache-ca.crt http://YOUR_LANCACHE_IP/lancache-certs/lancache-ca.pem
sudo cp lancache-ca.crt /usr/local/share/ca-certificates/
sudo update-ca-certificates
</pre>
</body>
</html>';
    }
