# Monolithic Game Download Cache - Environment Variables
# Copy this file to .env and customize as needed

# === Cache Settings ===
CACHE_DISK_SIZE=1000g
CACHE_INDEX_SIZE=500m
CACHE_MAX_AGE=3560d
CACHE_SLICE_SIZE=1m
MIN_FREE_DISK=10g

# === Network ===
UPSTREAM_DNS=8.8.8.8 8.8.4.4

# === Cache Domains ===
CACHE_DOMAINS_REPO=https://github.com/uklans/cache-domains.git
CACHE_DOMAINS_BRANCH=master
NOFETCH=false

# === Upstream Keepalive ===
# Reuses TCP connections to CDNs for faster cache-miss downloads
ENABLE_UPSTREAM_KEEPALIVE=false
UPSTREAM_KEEPALIVE_CONNECTIONS=16
UPSTREAM_KEEPALIVE_TIMEOUT=5m
UPSTREAM_KEEPALIVE_REQUESTS=10000
# Optional: comma-separated cache identifiers to always exclude from keepalive (e.g. UPSTREAM_KEEPALIVE_EXCLUDE=epic,origin)
# UPSTREAM_KEEPALIVE_EXCLUDE=

# === No-Slice Fallback ===
# Auto-detects servers that don't support Range requests
NOSLICE_FALLBACK=false
NOSLICE_THRESHOLD=3
DECAY_INTERVAL=86400

# === Nginx ===
NGINX_WORKER_PROCESSES=auto
NGINX_LOG_FORMAT=cachelog
NGINX_LOG_TO_STDOUT=false

# === Timeouts ===
NGINX_PROXY_CONNECT_TIMEOUT=300s
NGINX_PROXY_READ_TIMEOUT=300s
NGINX_PROXY_SEND_TIMEOUT=300s
NGINX_SEND_TIMEOUT=300s
# Retry timeouts for automatic upstream failure recovery (502/504 triggers retry with these values)
NGINX_UPSTREAM_READ_TIMEOUT_LONG=600s
NGINX_UPSTREAM_CONNECT_TIMEOUT_LONG=120s

# === Permissions ===
PUID=33
PGID=33
SKIP_PERMS_CHECK=false
FORCE_PERMS_CHECK=false

# === Logging ===
LOGFILE_RETENTION=3560
BEAT_TIME=1h
SUPERVISORD_LOGLEVEL=error
